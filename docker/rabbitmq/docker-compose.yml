networks:
  app-network:
    driver: bridge

services:
  rabbitmq:
    # 带Web管理界面的RabbitMQ镜像（3.13最新稳定版）
    image: rabbitmq:3.13-management
    container_name: rabbitmq
    restart: always
    # 核心端口映射（仅保留必需的AMQP和管理界面端口）
    ports:
      - "5672:5672"  # 客户端连接的AMQP端口
      - "15672:15672"  # Web管理界面端口
    environment:
      RABBITMQ_DEFAULT_USER: admin       # 自定义登录用户名
      RABBITMQ_DEFAULT_PASS: admin      # 自定义登录密码
    volumes:
      - rabbitmq_data:/var/lib/rabbitmq
    # 自定义网络（避免端口冲突）
    networks:
      - app-network

# 持久化数据卷
volumes:
  rabbitmq_data:

